<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Lector de target.mind con Cámara</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.jsdelivr.net/npm/aframe@1.4.2/dist/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.0/dist/mindar-image-aframe.prod.js"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        #status {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 10px;
            border-radius: 5px;
            z-index: 100;
        }
        #detectionMessage {
            position: absolute;
            bottom: 20px;
            left: 0;
            right: 0;
            text-align: center;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 15px;
            font-size: 18px;
            z-index: 100;
        }
    </style>
</head>
<body>
    <div id="status">Preparando cámara...</div>
    <div id="detectionMessage" style="display:none;">¡Imagen target.mind detectada!</div>
    
    <a-scene mindar-image="imageTargetSrc: target.mind;" vr-mode-ui="enabled: false" embedded>
        <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>
        
        <a-entity mindar-image-target="targetIndex: 0">
            <!-- Aquí puedes agregar contenido AR que aparecerá cuando se detecte la imagen -->
            <a-text value="¡target.mind detectado!" position="0 0.2 0" color="white" align="center"></a-text>
        </a-entity>
    </a-scene>

    <script>
        const scene = document.querySelector('a-scene');
        const detectionMessage = document.getElementById('detectionMessage');
        const statusElement = document.getElementById('status');
        
        // Evento cuando el sistema AR está listo
        scene.addEventListener('arReady', (event) => {
            statusElement.textContent = "Cámara activa - Buscando target.mind...";
        });
        
        // Evento cuando se detecta la imagen
        scene.addEventListener('targetFound', (event) => {
            detectionMessage.style.display = 'block';
            statusElement.textContent = "target.mind detectado";
            console.log("Imagen target.mind detectada!");
        });
        
        // Evento cuando se pierde la imagen
        scene.addEventListener('targetLost', (event) => {
            detectionMessage.style.display = 'none';
            statusElement.textContent = "Buscando target.mind...";
        });
        
        // Manejo de errores
        scene.addEventListener('arError', (event) => {
            statusElement.textContent = "Error: " + event.detail.error;
            console.error("Error en AR:", event.detail.error);
        });
    </script>
</body>
</html>
